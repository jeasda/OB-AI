<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OB AI Studio - Image Edit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="logo.png">
</head>

<body>
  <div class="app-container">

    <!-- LEFT PANEL: CONTROLS -->
    <aside class="panel-left">
      <header>
        <h1>OB AI Studio</h1>
        <p class="subtitle">AI Image Editor (Qwen-VL)</p>
      </header>

      <!-- 1. Source Image -->
      <div class="form-group">
        <label>1. Upload Image (Required)</label>
        <div id="drop-zone" class="drop-zone">
          <div class="drop-zone-text">
            <span>üì∑</span>
            <p>Drag & Drop or Click</p>
            <p style="font-size: 0.8rem; opacity: 0.6">JPG / PNG Only</p>
          </div>
          <input type="file" id="file-input" accept="image/png, image/jpeg" style="display: none;">
          <img id="preview-img" class="preview hidden" alt="Source Preview">
        </div>
      </div>

      <!-- 2. Prompt -->
      <div class="form-group">
        <label for="prompt">2. Edit Instruction</label>
        <textarea id="prompt"
          placeholder="e.g. Change the dress to silver color, make it cinematic lighting..."></textarea>
      </div>

      <!-- 3. Ratio -->
      <div class="form-group">
        <label for="ratio">3. Aspect Ratio</label>
        <select id="ratio">
          <option value="1:1" selected>1:1 (Square)</option>
          <option value="4:5">4:5 (Social Portrait)</option>
          <option value="3:4">3:4 (Portrait)</option>
          <option value="9:16">9:16 (Story)</option>
          <option value="16:9">16:9 (Landscape)</option>
        </select>
      </div>

      <!-- Generate Button -->
      <button id="generate-btn" class="btn-primary" disabled>Generate Edit ‚ú®</button>
    </aside>

    <!-- RIGHT PANEL: PREVIEW / RESULT -->
    <main class="panel-right">

      <!-- State 0: Empty -->
      <div id="view-empty" class="empty-state">
        <svg fill="currentColor" viewBox="0 0 20 20">
          <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" />
        </svg>
        <p>Your result will appear here</p>
      </div>

      <!-- State 1: Processing -->
      <div id="view-processing" class="processing-container hidden">
        <div class="spinner-icon" style="font-size: 3rem; margin-bottom: 1rem; animation: spin 2s infinite linear;">‚ö°
        </div>
        <h2 id="status-main" style="margin-bottom: 0.5rem">Starting...</h2>
        <div class="progress-bar-container">
          <div id="progress-bar" class="progress-bar"></div>
        </div>
        <p id="status-detail" class="status-text" style="font-size: 0.9rem; opacity: 0.7">Preparing resources...</p>
      </div>

      <!-- State 2: Result -->
      <div id="view-result" class="result-container hidden">
        <div class="image-wrapper">
          <img id="result-img" src="" alt="AI Result">
        </div>
        <div class="result-actions">
          <a id="download-btn" href="#" download target="_blank" class="btn-secondary">
            ‚¨á Download Image
          </a>
          <button id="reset-btn" class="btn-secondary">
            ‚Ü∫ Edit Another
          </button>
        </div>
      </div>

      <!-- State 3: Error -->
      <div id="view-error" class="hidden" style="text-align: center; color: #ef4444;">
        <h2 style="font-size: 2rem; margin-bottom: 1rem;">‚ùå</h2>
        <h3>Creation Failed</h3>
        <p id="error-msg" style="margin: 1rem 0; color: var(--text-muted);"></p>
        <button id="retry-btn" class="btn-secondary" style="border-color: #ef4444;">Try Again</button>
      </div>

    </main>
  </div>
  <script type="module" src="app.js"></script>
</body>

</html>
